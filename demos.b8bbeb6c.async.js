(self.webpackChunk_zpcscc_demo=self.webpackChunk_zpcscc_demo||[]).push([[433],{34720:function(X,v,a){"use strict";a.r(v),a.d(v,{default:function(){return en}});var c=a(28152),w=a.n(c),D=a(33198),I=a(71269),x=a(138),h=a(50959),z=a(73880),ne=a(62003);function Ie(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var me=(0,ne.Z)("div",{target:"e1jg7fy90"})({name:"19y9b37",styles:"width:100%;height:24px;display:flex;justify-content:left;align-items:center;padding:2px 5px;color:#333333;font-weight:normal;font-size:12px;white-space:nowrap;cursor:pointer;&:hover,&:focus{color:#ffffff;text-decoration:none;background-color:#0081c2;background-image:linear-gradient(to bottom, #0088cc, #0077b3);background-repeat:repeat-x;}.ant-space{pointer-events:none;}"}),o=a(72451),we=function(_){var n=_.menuData,e=n.label,s=e===void 0?"":e,f=n.icon,C=f===void 0?"":f,b=n.onClick,E=function(L){b==null||b(L)};return(0,o.tZ)(me,{className:"menu-item",onClick:E,children:(0,o.BX)(z.Z,{align:"center",size:5,children:[C,(0,o.tZ)("span",{className:"menu-action",children:s})]})})},ie=we;function Se(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Ee=(0,ne.Z)("div",{target:"ecxfqcg0"})({name:"qox3nw",styles:"min-width:145px;border-width:1px;z-index:65535;position:absolute;max-height:400px;overflow-x:hidden;overflow-y:auto;background:none repeat scroll 0 0 #ffffff;border:1px solid rgba(0, 0, 0, 0.2);box-shadow:0 5px 10px rgba(0, 0, 0, 0.2)"}),Pe=[{label:"\u9009\u98791",onClick:function(){console.log("\u8FD9\u662F\u9009\u98791")}},{label:"\u9009\u98792",onClick:function(){console.log("\u8FD9\u662F\u9009\u98792")}},{label:"\u9009\u98793",onClick:function(){console.log("\u8FD9\u662F\u9009\u98793")}}],Fe=function(_,n,e){if(!_||!n)return{left:_,top:n};var s={left:_,top:n};return e&&(n+e>document.body.offsetHeight&&(s.top=n-e),_+160>document.body.offsetWidth&&(s.left=_-160)),s},Ge=function(_){var n=_.open,e=_.menuData,s=_.position,f=s===void 0?{left:0,top:0}:s,C=e||Pe,b=C.length*25,E=Fe((f==null?void 0:f.left)||0,(f==null?void 0:f.top)||0,b),p=E.left,L=E.top;return(n||null)&&(0,o.tZ)(Ee,{style:{left:p,top:L},onContextMenu:function(d){return d.preventDefault()},children:C==null?void 0:C.map(function(R,d){return(0,o.tZ)(ie,{menuData:R},d)})})},He=Ge,qe=a(77117),M=a.n(qe),Ne=a(32306),Xe=a(8323),Q=a(54407),De=a(62124),We=a(47519),Ye=a(40815),Qe=function(_){var n=_.opt,e=_.onOptChange,s=_.type,f=s===void 0?"global":s,C=[{label:"Recommended",colors:["#000000","#000000E0","#000000A6","#00000073","#00000040","#00000026","#0000001A","#00000012","#0000000A","#00000005","#F5222D","#FA8C16","#FADB14","#8BBB11","#52C41A","#13A8A8","#1677FF","#2F54EB","#722ED1","#EB2F96","#F5222D4D","#FA8C164D","#FADB144D","#8BBB114D","#52C41A4D","#13A8A84D","#1677FF4D","#2F54EB4D","#722ED14D","#EB2F964D"]},{label:"Recent",colors:["#F5222D4D","#FA8C164D","#FADB144D","#8BBB114D","#52C41A4D","#13A8A84D"]}],b=function(p,L){var R=L.components,d=R.Picker,Z=R.Presets;return(0,o.BX)("div",{className:"custom-panel",style:{display:"flex",width:468},children:[(0,o.tZ)("div",{style:{flex:1},children:(0,o.tZ)(Z,{})}),(0,o.tZ)(Ne.Z,{type:"vertical",style:{height:"auto"}}),(0,o.tZ)("div",{style:{width:234},children:(0,o.tZ)(d,{})})]})};return(0,o.BX)(Xe.Z,{align:"middle",children:[f==="global"&&(0,o.tZ)(Q.Z,{span:8,children:(0,o.BX)(z.Z,{children:[(0,o.tZ)("span",{children:"\u6A21\u5F0F\u5207\u6362: "}),(0,o.tZ)(De.Z,{checkedChildren:"\u7ED8\u5236",unCheckedChildren:"\u6846\u9009",checked:n==null?void 0:n.isDrawingMode,onChange:function(p){e==null||e("isDrawingMode",M()(M()({},n),{},{isDrawingMode:p}))}})]})}),(0,o.tZ)(Q.Z,{span:8,children:(0,o.BX)(z.Z,{children:[(0,o.tZ)("span",{children:"\u7B14\u5237\u989C\u8272: "}),(0,o.tZ)(We.Z,{styles:{popupOverlayInner:{width:468+24}},presets:C,panelRender:b,value:n==null?void 0:n.color,onChange:function(p){e==null||e("color",M()(M()({},n),{},{color:p.toHexString()}))}})]})}),(0,o.tZ)(Q.Z,{span:8,children:(0,o.BX)(z.Z,{children:[(0,o.tZ)("span",{children:"\u7B14\u5237\u5BBD\u5EA6: "}),(0,o.tZ)(Ye.Z,{addonAfter:"px",style:{width:"100px"},value:n==null?void 0:n.width,onChange:function(p){e==null||e("width",M()(M()({},n),{},{width:p||5}))}})]})}),(0,o.tZ)(Q.Z,{span:8,children:(0,o.BX)(z.Z,{children:[(0,o.tZ)("span",{children:"\u663E\u793A\u7BAD\u5934: "}),(0,o.tZ)(De.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",checked:n==null?void 0:n.showArrow,onChange:function(p){e==null||e("showArrow",M()(M()({},n),{},{showArrow:p}))}})]})}),(0,o.tZ)(Q.Z,{span:8,children:(0,o.BX)(z.Z,{children:[(0,o.tZ)("span",{children:"\u663E\u793A\u80CC\u666F: "}),(0,o.tZ)(De.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",checked:n==null?void 0:n.showBackground,onChange:function(p){e==null||e("showBackground",M()(M()({},n),{},{showBackground:p}))}})]})}),(0,o.tZ)(Q.Z,{span:8,children:(0,o.BX)(z.Z,{children:[(0,o.tZ)("span",{children:"\u80CC\u666F\u989C\u8272: "}),(0,o.tZ)(We.Z,{styles:{popupOverlayInner:{width:468+24}},presets:C,panelRender:b,value:n==null?void 0:n.backgroundColor,onChange:function(p){e==null||e("backgroundColor",M()(M()({},n),{},{backgroundColor:p.toHexString()}))}})]})})]})},ze=Qe;function sn(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Je=(0,ne.Z)("div",{target:"e1ru9zw10"})({name:"1qyexfk",styles:"width:100%;height:56vh;border:1px solid #999999;position:relative;#canvas-tools-container{width:100%;height:100%;position:absolute;}"}),Ve=function(_,n,e){var s=e||{},f=s.theta,C=f===void 0?30:f,b=s.headlen,E=b===void 0?30:b,p=n.path.toReversed().find(function(xe){return xe[0]==="Q"}),L=n.path.at(-1);if(!(!p||!L)){var R={x:p[3],y:p[4]},d={x:L[1],y:L[2]},Z=Math.atan2(R.y-d.y,R.x-d.x)*180/Math.PI,re=(Z+C)*Math.PI/180,oe=(Z-C)*Math.PI/180,Ce=E*Math.cos(re),U=E*Math.sin(re),be=E*Math.cos(oe),ae=E*Math.sin(oe),ye=[d.x+Ce,d.y+U,d.x-2,d.y-2],te=[d.x-2,d.y-2,d.x+be,d.y+ae],le=M()({stroke:"#66ccff"},e),de=new x.fabric.Line(ye,le),Me=new x.fabric.Line(te,le),Oe=new x.fabric.Group([n,de,Me]);_.add(Oe),_.remove(n)}},Ze=Ve,cn=function(_,n){var e={top:10,left:100,radius:40,fill:"#66ccff"},s=new fabric.Circle(_objectSpread(_objectSpread({},e),n));_.add(s)},_n=null,un=function(_,n){var e={top:10,left:200,rx:70,ry:30,fill:"#66ccff"},s=new fabric.Ellipse(_objectSpread(_objectSpread({},e),n));_.add(s)},vn=null,hn=function(_,n,e){var s=[450,10,500,100],f={stroke:"#66ccff"},C=new fabric.Line(n||s,_objectSpread(_objectSpread({},f),e));_.add(C)},fn=null,pn=function(_,n){var e={top:10,left:10,width:60,height:60,fill:"#66ccff"},s=new fabric.Rect(_objectSpread(_objectSpread({},e),n));_.add(s)},mn=null,wn=function(_,n){var e={top:10,left:350,width:60,height:80,fill:"#66ccff"},s=new fabric.Triangle(_objectSpread(_objectSpread({},e),n));_.add(s)},En=null,$e=function(){var _=(0,h.useRef)(null),n=(0,h.useRef)(null),e=(0,h.useRef)(null),s=(0,h.useRef)(null),f={width:3,color:"#66ccff",backgroundColor:"#66ccff",showArrow:!1,showBackground:!1,isDrawingMode:!0},C=(0,h.useState)(f),b=w()(C,2),E=b[0],p=b[1],L=(0,h.useState)({}),R=w()(L,2),d=R[0],Z=R[1],re=(0,h.useState)(!1),oe=w()(re,2),Ce=oe[0],U=oe[1],be=(0,h.useState)(!1),ae=w()(be,2),ye=ae[0],te=ae[1],le=(0,h.useState)({left:0,top:0}),de=w()(le,2),Me=de[0],Oe=de[1],xe=(0,h.useState)([]),Ue=w()(xe,2),nn=Ue[0],je=Ue[1],S=(0,D.Z)(E),Ke=[{label:"\u7C98\u8D34",onClick:function(){if(U(!1),!s.current){alert("\u8FD8\u6CA1\u590D\u5236\u8FC7\u4EFB\u4F55\u5185\u5BB9");return}s.current.clone(function(r){var u;if(s.current){if(r.set({left:r.left+10,top:r.top+10,evented:!0}),r.type==="activeSelection")r.canvas=n.current,r.forEachObject(function(m){var k;(k=n.current)===null||k===void 0||k.add(m)}),r.setCoords();else{var P;(P=n.current)===null||P===void 0||P.add(r)}s.current.top+=10,s.current.left+=10,(u=n.current)===null||u===void 0||u.renderAll()}})}}],on=[{label:"\u590D\u5236",onClick:function(){U(!1),e.current&&e.current.clone(function(r){s.current=r})}}].concat(Ke,[{label:"\u5220\u9664",onClick:function(){if(U(!1),e.current){var r,u;(r=n.current)===null||r===void 0||(u=r.remove)===null||u===void 0||u.call(r,e.current)}e.current=null}},{label:"\u8BBE\u7F6E",onClick:function(){var r,u,P,m,k,j,B,K,W,F,A,G,Y,H,g,q,T,N;U(!1),Z({color:((r=e.current)===null||r===void 0||(u=r.item)===null||u===void 0?void 0:u.call(r,0).stroke)||((P=e.current)===null||P===void 0?void 0:P.stroke)||S.current.color,width:((m=e.current)===null||m===void 0||(k=m.item)===null||k===void 0?void 0:k.call(m,0).strokeWidth)||((j=e.current)===null||j===void 0?void 0:j.strokeWidth)||S.current.width,backgroundColor:((B=e.current)===null||B===void 0||(K=B.item)===null||K===void 0?void 0:K.call(B,0).fill)||((W=e.current)===null||W===void 0?void 0:W.fill)&&((F=e.current)===null||F===void 0?void 0:F.fill)!=="rgb(0,0,0)"||S.current.backgroundColor,showBackground:!!(!((A=e.current)===null||A===void 0||(G=A.item)===null||G===void 0)&&G.call(A,0).fill||!((Y=e.current)===null||Y===void 0)&&Y.fill&&((H=e.current)===null||H===void 0?void 0:H.fill)!=="rgb(0,0,0)"),showArrow:!!(!((g=e.current)===null||g===void 0||(q=g.item)===null||q===void 0)&&q.call(g,1)&&((T=e.current)===null||T===void 0||(N=T.item)===null||N===void 0?void 0:N.call(T,1).get("opacity"))===1)}),te(!0)}}]),tn=function(r){r.freeDrawingBrush=new x.fabric.PencilBrush(r),r.freeDrawingBrush.color=f.color,r.freeDrawingBrush.width=f.width,r.freeDrawingBrush.decimate=5},rn=function(r){r&&tn(r)},an=function(r){r.on("mouse:down",function(u){var P=u.button,m=u.e;P===3?(u.target?(e.current=u.target,je(on)):je(Ke),Oe({left:m.pageX,top:m.pageY}),U(!0)):(e.current=null,U(!1))}),r.on("path:created",function(u){var P=u.path;S.current.showBackground&&P.set("fill",S.current.backgroundColor),S.current.showArrow&&Ze(r,P,{stroke:S.current.color,strokeWidth:S.current.width})})},ln=function(r,u){if(p(u),!!n.current)switch(r){case"isDrawingMode":{n.current.isDrawingMode=u.isDrawingMode;break}case"color":case"width":{n.current.freeDrawingBrush[r]=u[r];break}}},dn=function(){var r,u;if(!(!e.current||!n.current)){if(!d.showBackground){var P,m,k;(P=e.current)===null||P===void 0||(m=P.item)===null||m===void 0||(m=m.call(P,0))===null||m===void 0||m.set("fill",null),(k=e.current)===null||k===void 0||k.set("fill",null)}if(d.backgroundColor&&d.showBackground){var j,B,K,W,F,A,G,Y;(j=e.current)===null||j===void 0||(B=j.item)===null||B===void 0||(B=B.call(j,0))===null||B===void 0||B.set("fill",d.backgroundColor),(K=e.current)===null||K===void 0||(W=K.item)===null||W===void 0||(W=W.call(K,1))===null||W===void 0||W.set("fill",d.backgroundColor),(F=e.current)===null||F===void 0||(A=F.item)===null||A===void 0||(A=A.call(F,2))===null||A===void 0||A.set("fill",d.backgroundColor),(G=e.current)===null||G===void 0||(Y=G.set)===null||Y===void 0||Y.call(G,"fill",d.backgroundColor)}if(d.color){var H,g,q,T,N,J,Le;(H=e.current)===null||H===void 0||(g=H.item)===null||g===void 0||(g=g.call(H,0))===null||g===void 0||g.set("stroke",d.color),(q=e.current)===null||q===void 0||(T=q.item)===null||T===void 0||(T=T.call(q,1))===null||T===void 0||T.set("stroke",d.color),(N=e.current)===null||N===void 0||(J=N.item)===null||J===void 0||(J=J.call(N,2))===null||J===void 0||J.set("stroke",d.color),(Le=e.current)===null||Le===void 0||Le.set("stroke",d.color)}if(d.width){var se,V,ce,$,_e,ee,Re;(se=e.current)===null||se===void 0||(V=se.item)===null||V===void 0||(V=V.call(se,0))===null||V===void 0||V.set("strokeWidth",d.width),(ce=e.current)===null||ce===void 0||($=ce.item)===null||$===void 0||($=$.call(ce,1))===null||$===void 0||$.set("strokeWidth",d.width),(_e=e.current)===null||_e===void 0||(ee=_e.item)===null||ee===void 0||(ee=ee.call(_e,2))===null||ee===void 0||ee.set("strokeWidth",d.width),(Re=e.current)===null||Re===void 0||Re.set("strokeWidth",d.width)}if(d.showArrow){var ue,ke;if((ue=e.current)!==null&&ue!==void 0&&(ke=ue.item)!==null&&ke!==void 0&&ke.call(ue,1)){var ve,Be,he,Ae;(ve=e.current)===null||ve===void 0||(Be=ve.item)===null||Be===void 0||Be.call(ve,1).set("opacity",1),(he=e.current)===null||he===void 0||(Ae=he.item)===null||Ae===void 0||Ae.call(he,2).set("opacity",1)}else Ze(n.current,e.current,{stroke:S.current.color,strokeWidth:S.current.width})}else if((r=e.current)!==null&&r!==void 0&&(u=r.item)!==null&&u!==void 0&&u.call(r,1)){var fe,ge,pe,Te;(fe=e.current)===null||fe===void 0||(ge=fe.item)===null||ge===void 0||ge.call(fe,1).set("opacity",0),(pe=e.current)===null||pe===void 0||(Te=pe.item)===null||Te===void 0||Te.call(pe,2).set("opacity",0)}te(!1),Z({}),n.current.renderAll()}};return(0,h.useEffect)(function(){var y=document.querySelector("#container");if(y){var r=y.offsetWidth,u=y.offsetHeight,P={width:r,height:u,isDrawingMode:f.isDrawingMode,fireRightClick:!0,stopContextMenu:!0};n.current=new x.fabric.Canvas(_.current,P),rn(n.current),an(n.current)}return function(){var m;n==null||(m=n.current)===null||m===void 0||m.dispose()}},[]),(0,o.BX)(o.HY,{children:[(0,o.tZ)(ze,{opt:E,onOptChange:ln}),(0,o.tZ)(Je,{id:"container",children:(0,o.tZ)("canvas",{id:"canvas-tools-container",ref:_})}),(0,o.tZ)(He,{open:Ce,position:Me,menuData:nn}),(0,o.tZ)(I.Z,{title:"\u914D\u7F6E\u5F53\u524D\u5BF9\u8C61",open:ye,width:600,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:dn,onCancel:function(){return te(!1)},children:(0,o.tZ)(ze,{type:"local",opt:d,onOptChange:function(r,u){return Z(u)}})})]})},en=$e},58371:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(77117),_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__),jquery__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2692),jquery__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(50959),three__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(97710),three_addons_controls_TrackballControls_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5294),three_addons_lines_Line2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(70696),three_addons_lines_LineGeometry_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(79531),three_addons_lines_LineMaterial_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(95312),three_addons_renderers_CSS3DRenderer_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(54481),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(72451),ThreeLayerGraph=function ThreeLayerGraph(){var camera,scene,sceneLine,renderer,webGLRenderer,isCreateLine,controls,points_list=[],DEG2RAD=.005555555555555556*Math.PI,materialOption={color:6737151,linewidth:5,dashed:!0},material=new three_addons_lines_LineMaterial_js__WEBPACK_IMPORTED_MODULE_3__.Y(_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0___default()(_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0___default()({},materialOption),{},{linewidth:3,dashed:!1})),materialDashed=new three_addons_lines_LineMaterial_js__WEBPACK_IMPORTED_MODULE_3__.Y(_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0___default()(_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_2_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0___default()({},materialOption),{},{dashed:!0})),planeOption={width:200,height:100,interval:40},createElement=function(v,a){var c=document.createElement("div");return c.className="node",c.style.width="10px",c.style.height="10px",c.style.background=new three__WEBPACK_IMPORTED_MODULE_4__.Ilk(Math.random()*16777215).getStyle(),c.style.borderRadius="50%",c.style.margin="10px auto",c.dataset.z=String(v),c.dataset.id=a,c},createPlane=function(v){var a=v.position,c=v.background,w=v.id,D=document.createElement("div"),I=document.createElement("div");D.className="plane",D.style.width="".concat(planeOption.width,"px"),D.style.height="".concat(planeOption.height,"px"),D.style.opacity="0.7",D.style.background=c,D.style.border="10px #66ccff solid",D.dataset.id=String(w),I.style.width="100%",I.style.height="100%",I.style.display="grid",I.style.gridTemplateColumns="repeat(4,1fr)";for(var x=1;x<=12;x++)I.append(createElement(a.z,"".concat(w,"-").concat(x)));D.append(I);var h=new three_addons_renderers_CSS3DRenderer_js__WEBPACK_IMPORTED_MODULE_5__.cp(D);return h.position.x=a.x,h.position.y=a.y,h.position.z=a.z,h},createLine=function createLine(startPoint,endPoint){var isSamePlane=startPoint.z===endPoint.z,_ref2=planeOption||{},interval=_ref2.interval,absolute=Math.max(startPoint.z,endPoint.z)-Math.min(startPoint.z,endPoint.z),controlPoint1=startPoint,controlPoint2=endPoint;if(!isSamePlane&&absolute>interval){var centerPoint={x:(startPoint.x+endPoint.x)/2,y:(startPoint.y+endPoint.y)/2,z:(startPoint.z+endPoint.z)/2},oneThird={x:(2*startPoint.x+endPoint.x)/3,y:(2*startPoint.y+endPoint.y)/3,z:(2*startPoint.z+endPoint.z)/3},twoThird={x:(startPoint.x+2*endPoint.x)/3,y:(startPoint.y+2*endPoint.y)/3,z:(startPoint.z+2*endPoint.z)/3},getOffsetDistance=function(){var v=centerPoint.x,a=centerPoint.y,c=planeOption.width/2-Math.abs(v),w=planeOption.height/2-Math.abs(a);return c>w?{x:0,y:w*2.5}:{x:c*2.5,y:0}},operator={x:centerPoint.x>0?"+":"-",y:centerPoint.y>0?"+":"-"},offsetDistance=getOffsetDistance();controlPoint1={x:eval("".concat(oneThird.x," ").concat(operator.x," ").concat(offsetDistance.x)),y:eval("".concat(oneThird.y," ").concat(operator.y," ").concat(offsetDistance.y)),z:oneThird.z},controlPoint2={x:eval("".concat(twoThird.x," ").concat(operator.x," ").concat(offsetDistance.x)),y:eval("".concat(twoThird.y," ").concat(operator.y," ").concat(offsetDistance.y)),z:twoThird.z}}for(var curve=new three__WEBPACK_IMPORTED_MODULE_4__.yj7(new three__WEBPACK_IMPORTED_MODULE_4__.Pa4(startPoint.x,startPoint.y,startPoint.z),new three__WEBPACK_IMPORTED_MODULE_4__.Pa4(controlPoint1.x,controlPoint1.y,controlPoint1.z),new three__WEBPACK_IMPORTED_MODULE_4__.Pa4(controlPoint2.x,controlPoint2.y,controlPoint2.z),new three__WEBPACK_IMPORTED_MODULE_4__.Pa4(endPoint.x,endPoint.y,endPoint.z)),points=curve.getPoints(200),spline=new three__WEBPACK_IMPORTED_MODULE_4__.YT8(points),divisions=Math.round(points.length),point=new three__WEBPACK_IMPORTED_MODULE_4__.Pa4,positions=[],i=0,l=divisions;i<l;i++){var t=i/l;spline.getPoint(t,point),positions.push(point.x,point.y,point.z)}var geometry=new three_addons_lines_LineGeometry_js__WEBPACK_IMPORTED_MODULE_6__.L().setPositions(positions),line=new three_addons_lines_Line2_js__WEBPACK_IMPORTED_MODULE_7__.w(geometry,isSamePlane?material:materialDashed);line.computeLineDistances(),sceneLine.add(line);var startPos=points.at(-2),endPos=points.at(-1),direction=new three__WEBPACK_IMPORTED_MODULE_4__.Pa4(endPos.x-startPos.x,endPos.y-startPos.y,endPos.z-startPos.z).normalize(),length=1,hex=6737151,arrowHelper=new three__WEBPACK_IMPORTED_MODULE_4__.tGC(direction,startPos,length,hex,3,3);sceneLine.add(arrowHelper)},init=function X(){var v,a;camera=new three__WEBPACK_IMPORTED_MODULE_4__.cPb(45,window.innerWidth/window.innerHeight,1,1e3),camera.position.set(0,0,400),camera.lookAt(0,0,0);var c={rotation:{x:-(70*DEG2RAD),y:0*DEG2RAD,z:40*DEG2RAD},background:new three__WEBPACK_IMPORTED_MODULE_4__.Ilk(15790320)};scene=new three__WEBPACK_IMPORTED_MODULE_4__.xsS,scene.background=c.background,scene.rotation.x=c.rotation.x,scene.rotation.y=c.rotation.y,scene.rotation.z=c.rotation.z,sceneLine=new three__WEBPACK_IMPORTED_MODULE_4__.xsS,sceneLine.background="transparent",sceneLine.rotation.x=c.rotation.x,sceneLine.rotation.y=c.rotation.y,sceneLine.rotation.z=c.rotation.z,scene.add(createPlane({position:{x:0,y:0,z:40},background:"red",id:1})),scene.add(createPlane({position:{x:0,y:0,z:0},background:"green",id:2})),scene.add(createPlane({position:{x:0,y:0,z:-40},background:"blue",id:3})),renderer=new three_addons_renderers_CSS3DRenderer_js__WEBPACK_IMPORTED_MODULE_5__.lX,renderer.setSize(window.innerWidth,window.innerHeight),renderer.domElement.style.position="absolute",renderer.domElement.style.top="50%",renderer.domElement.style.left="50%",renderer.domElement.style.transform="translate(-50%, -50%)",(v=document.querySelector("#container"))===null||v===void 0||v.append(renderer.domElement),controls=new three_addons_controls_TrackballControls_js__WEBPACK_IMPORTED_MODULE_8__.$(camera,renderer.domElement),webGLRenderer=new three__WEBPACK_IMPORTED_MODULE_4__.CP7({antialias:!0,alpha:!0}),webGLRenderer.setClearColor(0,0),webGLRenderer.setPixelRatio(window.devicePixelRatio),webGLRenderer.setSize(window.innerWidth,window.innerHeight),webGLRenderer.useLegacyLights=!1,webGLRenderer.domElement.style.position="absolute",webGLRenderer.domElement.style.top="50%",webGLRenderer.domElement.style.left="50%",webGLRenderer.domElement.style.transform="translate(-50%, -50%)",webGLRenderer.domElement.style.zIndex=1,webGLRenderer.domElement.style.pointerEvents="none",(a=document.querySelector("#container"))===null||a===void 0||a.append(webGLRenderer.domElement)},animate=function X(){var v;if(!isCreateLine){var a=document.querySelectorAll(".node");if(a.length>0){a.forEach(function(x){var h=x||{},z=h.offsetLeft,ne=h.offsetTop,Ie=h.dataset,me=h.offsetWidth,o=h.offsetHeight,we=Number(Ie.z),ie=planeOption||{},Se=ie.width,Ee=ie.height,Pe={x:-Se/2+z+me/2,y:Ee/2-ne-o/2,z:we};points_list.push(Pe)});for(var c=function(){return Math.floor(Math.random()*points_list.length)},w=1;w<=20;w++){var D=points_list[c()],I=points_list[c()];createLine(D,I)}isCreateLine=!0}}(v=controls)===null||v===void 0||v.update(),renderer.render(scene,camera),webGLRenderer.render(sceneLine,camera),material.resolution.set(window.innerWidth,window.innerHeight),materialDashed.resolution.set(window.innerWidth,window.innerHeight),requestAnimationFrame(X)},addEventListener=function X(){var v,a;jquery__WEBPACK_IMPORTED_MODULE_1___default()(".plane").off(),jquery__WEBPACK_IMPORTED_MODULE_1___default()(".node").off(),jquery__WEBPACK_IMPORTED_MODULE_1___default()(document.body).off("pointerup"),jquery__WEBPACK_IMPORTED_MODULE_1___default()(".plane").on("pointerdown",function(){var c=this.dataset,w=c||{},D=w.id;v=D}),jquery__WEBPACK_IMPORTED_MODULE_1___default()(".node").on("pointerdown",function(){var c=this.dataset,w=c||{},D=w.id;a=D}),jquery__WEBPACK_IMPORTED_MODULE_1___default()(document.body).on("pointerup",function(){a?console.log("\u89E6\u53D1\u4E86\u8282\u70B9-".concat(a)):v&&console.log("\u89E6\u53D1\u4E86\u5E73\u9762-".concat(v)),v=void 0,a=void 0}),window.addEventListener("resize",function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),webGLRenderer.setSize(window.innerWidth,window.innerHeight)})};return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function(){init(),animate(),addEventListener()}),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.tZ)("div",{id:"container",style:{position:"relative",overflow:"hidden",height:"400px",border:"1px solid #ccc"}})};__webpack_exports__.default=ThreeLayerGraph},41001:function(){},35287:function(){},7396:function(){}}]);
