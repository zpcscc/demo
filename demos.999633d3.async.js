"use strict";(self.webpackChunk_zpcscc_demo=self.webpackChunk_zpcscc_demo||[]).push([[433],{63742:function(H,h,o){o.r(h),o.d(h,{default:function(){return on}});var s=o(48305),p=o.n(s),y=o(48911),R=o(45931),L=o(95321),f=o(75271),T=o(42592),te=o(12975);function De(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var ae=(0,te.Z)("div",{target:"e1jg7fy90"})({name:"19y9b37",styles:"width:100%;height:24px;display:flex;justify-content:left;align-items:center;padding:2px 5px;color:#333333;font-weight:normal;font-size:12px;white-space:nowrap;cursor:pointer;&:hover,&:focus{color:#ffffff;text-decoration:none;background-color:#0081c2;background-image:linear-gradient(to bottom, #0088cc, #0077b3);background-repeat:repeat-x;}.ant-space{pointer-events:none;}"}),a=o(7903),Ee=function(u){var n=u.menuData,e=n.label,_=e===void 0?"":e,P=n.icon,O=P===void 0?"":P,x=n.onClick,M=function(k){x==null||x(k)};return(0,a.tZ)(ae,{className:"menu-item",onClick:M,children:(0,a.BX)(T.Z,{align:"center",size:5,children:[O,(0,a.tZ)("span",{className:"menu-action",children:_})]})})},_e=Ee;function re(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var G=(0,te.Z)("div",{target:"ecxfqcg0"})({name:"qox3nw",styles:"min-width:145px;border-width:1px;z-index:65535;position:absolute;max-height:400px;overflow-x:hidden;overflow-y:auto;background:none repeat scroll 0 0 #ffffff;border:1px solid rgba(0, 0, 0, 0.2);box-shadow:0 5px 10px rgba(0, 0, 0, 0.2)"}),le=[{label:"\u9009\u98791",onClick:function(){console.log("\u8FD9\u662F\u9009\u98791")}},{label:"\u9009\u98792",onClick:function(){console.log("\u8FD9\u662F\u9009\u98792")}},{label:"\u9009\u98793",onClick:function(){console.log("\u8FD9\u662F\u9009\u98793")}}],ie=function(u,n,e){if(!u||!n)return{left:u,top:n};var _={left:u,top:n};return e&&(n+e>document.body.offsetHeight&&(_.top=n-e),u+160>document.body.offsetWidth&&(_.left=u-160)),_},E=function(u){var n=u.open,e=u.menuData,_=u.position,P=_===void 0?{left:0,top:0}:_,O=e||le,x=O.length*25,M=ie((P==null?void 0:P.left)||0,(P==null?void 0:P.top)||0,x),D=M.left,k=M.top;return(n||null)&&(0,a.tZ)(G,{style:{left:D,top:k},onContextMenu:function(d){return d.preventDefault()},children:O==null?void 0:O.map(function(S,d){return(0,a.tZ)(_e,{menuData:S},d)})})},b=E,w=o(26068),c=o.n(w),X=o(26579),de=o(38345),g=o(10213),K=o(23689),N=o(84198),se=o(79572),We=function(u){var n=u.opt,e=u.onOptChange,_=u.type,P=_===void 0?"global":_,O=[{label:"Recommended",colors:["#000000","#000000E0","#000000A6","#00000073","#00000040","#00000026","#0000001A","#00000012","#0000000A","#00000005","#F5222D","#FA8C16","#FADB14","#8BBB11","#52C41A","#13A8A8","#1677FF","#2F54EB","#722ED1","#EB2F96","#F5222D4D","#FA8C164D","#FADB144D","#8BBB114D","#52C41A4D","#13A8A84D","#1677FF4D","#2F54EB4D","#722ED14D","#EB2F964D"]},{label:"Recent",colors:["#F5222D4D","#FA8C164D","#FADB144D","#8BBB114D","#52C41A4D","#13A8A84D"]}],x=function(D,k){var S=k.components,d=S.Picker,Y=S.Presets;return(0,a.BX)("div",{className:"custom-panel",style:{display:"flex",width:468},children:[(0,a.tZ)("div",{style:{flex:1},children:(0,a.tZ)(Y,{})}),(0,a.tZ)(X.Z,{type:"vertical",style:{height:"auto"}}),(0,a.tZ)("div",{style:{width:234},children:(0,a.tZ)(d,{})})]})};return(0,a.BX)(de.Z,{align:"middle",children:[P==="global"&&(0,a.tZ)(g.Z,{span:8,children:(0,a.BX)(T.Z,{children:[(0,a.tZ)("span",{children:"\u6A21\u5F0F\u5207\u6362: "}),(0,a.tZ)(K.Z,{checkedChildren:"\u7ED8\u5236",unCheckedChildren:"\u6846\u9009",checked:n==null?void 0:n.isDrawingMode,onChange:function(D){e==null||e("isDrawingMode",c()(c()({},n),{},{isDrawingMode:D}))}})]})}),(0,a.tZ)(g.Z,{span:8,children:(0,a.BX)(T.Z,{children:[(0,a.tZ)("span",{children:"\u7B14\u5237\u989C\u8272: "}),(0,a.tZ)(N.Z,{styles:{popupOverlayInner:{width:492}},presets:O,panelRender:x,value:n==null?void 0:n.color,onChange:function(D){e==null||e("color",c()(c()({},n),{},{color:D.toHexString()}))}})]})}),(0,a.tZ)(g.Z,{span:8,children:(0,a.BX)(T.Z,{children:[(0,a.tZ)("span",{children:"\u7B14\u5237\u5BBD\u5EA6: "}),(0,a.tZ)(se.Z,{addonAfter:"px",style:{width:"100px"},value:n==null?void 0:n.width,onChange:function(D){e==null||e("width",c()(c()({},n),{},{width:D||5}))}})]})}),(0,a.tZ)(g.Z,{span:8,children:(0,a.BX)(T.Z,{children:[(0,a.tZ)("span",{children:"\u663E\u793A\u7BAD\u5934: "}),(0,a.tZ)(K.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",checked:n==null?void 0:n.showArrow,onChange:function(D){e==null||e("showArrow",c()(c()({},n),{},{showArrow:D}))}})]})}),(0,a.tZ)(g.Z,{span:8,children:(0,a.BX)(T.Z,{children:[(0,a.tZ)("span",{children:"\u663E\u793A\u80CC\u666F: "}),(0,a.tZ)(K.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",checked:n==null?void 0:n.showBackground,onChange:function(D){e==null||e("showBackground",c()(c()({},n),{},{showBackground:D}))}})]})}),(0,a.tZ)(g.Z,{span:8,children:(0,a.BX)(T.Z,{children:[(0,a.tZ)("span",{children:"\u80CC\u666F\u989C\u8272: "}),(0,a.tZ)(N.Z,{styles:{popupOverlayInner:{width:492}},presets:O,panelRender:x,value:n==null?void 0:n.backgroundColor,onChange:function(D){e==null||e("backgroundColor",c()(c()({},n),{},{backgroundColor:D.toHexString()}))}})]})})]})},Ce=We;function ye(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var be=(0,te.Z)("div",{target:"e1ru9zw10"})({name:"1qyexfk",styles:"width:100%;height:56vh;border:1px solid #999999;position:relative;#canvas-tools-container{width:100%;height:100%;position:absolute;}"}),ce=function(u,n,e){var _=e||{},P=_.theta,O=P===void 0?30:P,x=_.headlen,M=x===void 0?30:x,D=n.path.toReversed().find(function(je){return je[0]==="Q"}),k=n.path.at(-1);if(!(!D||!k)){var S={x:D[3],y:D[4]},d={x:k[1],y:k[2]},Y=Math.atan2(S.y-d.y,S.x-d.x)*180/Math.PI,Me=(Y+O)*Math.PI/180,we=(Y-O)*Math.PI/180,ze=M*Math.cos(Me),q=M*Math.sin(Me),Ze=M*Math.cos(we),Oe=M*Math.sin(we),Ue=[d.x+ze,d.y+q,d.x-2,d.y-2],Pe=[d.x-2,d.y-2,d.x+Ze,d.y+Oe],Le=c()({stroke:"#66ccff"},e),ge=new L.x1(Ue,Le),Ke=new L.x1(Pe,Le),Fe=new L.ZA([n,ge,Ke]);u.add(Fe),u.remove(n)}},me=ce,Qe=function(u,n){var e={top:10,left:100,radius:40,fill:"#66ccff"},_=new Circle(_objectSpread(_objectSpread({},e),n));u.add(_)},un=null,_n=function(u,n){var e={top:10,left:200,rx:70,ry:30,fill:"#66ccff"},_=new Ellipse(_objectSpread(_objectSpread({},e),n));u.add(_)},vn=null,hn=function(u,n,e){var _=[450,10,500,100],P={stroke:"#66ccff"},O=new Line(n||_,_objectSpread(_objectSpread({},P),e));u.add(O)},fn=null,pn=function(u,n){var e={top:10,left:10,width:60,height:60,fill:"#66ccff"},_=new Rect(_objectSpread(_objectSpread({},e),n));u.add(_)},En=null,mn=function(u,n){var e={top:10,left:350,width:60,height:80,fill:"#66ccff"},_=new Triangle(_objectSpread(_objectSpread({},e),n));u.add(_)},wn=null,nn=function(){var u=(0,f.useRef)(null),n=(0,f.useRef)(null),e=(0,f.useRef)(null),_=(0,f.useRef)(null),P={width:3,color:"#66ccff",backgroundColor:"#66ccff",showArrow:!1,showBackground:!1,isDrawingMode:!0},O=(0,f.useState)(P),x=p()(O,2),M=x[0],D=x[1],k=(0,f.useState)({}),S=p()(k,2),d=S[0],Y=S[1],Me=(0,f.useState)(!1),we=p()(Me,2),ze=we[0],q=we[1],Ze=(0,f.useState)(!1),Oe=p()(Ze,2),Ue=Oe[0],Pe=Oe[1],Le=(0,f.useState)({left:0,top:0}),ge=p()(Le,2),Ke=ge[0],Fe=ge[1],je=(0,f.useState)([]),Ve=p()(je,2),tn=Ve[0],$e=Ve[1],F=(0,y.Z)(M),en=[{label:"\u7C98\u8D34",onClick:function(){if(q(!1),!_.current){alert("\u8FD8\u6CA1\u590D\u5236\u8FC7\u4EFB\u4F55\u5185\u5BB9");return}_.current.clone(function(r){var v;if(_.current){if(r.set({left:r.left+10,top:r.top+10,evented:!0}),r.type==="activeSelection")r.canvas=n.current,r.forEachObject(function(C){var I;(I=n.current)===null||I===void 0||I.add(C)}),r.setCoords();else{var m;(m=n.current)===null||m===void 0||m.add(r)}_.current.top+=10,_.current.left+=10,(v=n.current)===null||v===void 0||v.renderAll()}})}}],an=[{label:"\u590D\u5236",onClick:function(){q(!1),e.current&&e.current.clone(function(r){_.current=r})}}].concat(en,[{label:"\u5220\u9664",onClick:function(){if(q(!1),e.current){var r,v;(r=n.current)===null||r===void 0||(v=r.remove)===null||v===void 0||v.call(r,e.current)}e.current=null}},{label:"\u8BBE\u7F6E",onClick:function(){var r,v,m,C,I,J,W,Q,j,V,z,$,ue,ee,Z,ne,U,oe;q(!1),Y({color:((r=e.current)===null||r===void 0||(v=r.item)===null||v===void 0?void 0:v.call(r,0).stroke)||((m=e.current)===null||m===void 0?void 0:m.stroke)||F.current.color,width:((C=e.current)===null||C===void 0||(I=C.item)===null||I===void 0?void 0:I.call(C,0).strokeWidth)||((J=e.current)===null||J===void 0?void 0:J.strokeWidth)||F.current.width,backgroundColor:((W=e.current)===null||W===void 0||(Q=W.item)===null||Q===void 0?void 0:Q.call(W,0).fill)||((j=e.current)===null||j===void 0?void 0:j.fill)&&((V=e.current)===null||V===void 0?void 0:V.fill)!=="rgb(0,0,0)"||F.current.backgroundColor,showBackground:!!(!((z=e.current)===null||z===void 0||($=z.item)===null||$===void 0)&&$.call(z,0).fill||!((ue=e.current)===null||ue===void 0)&&ue.fill&&((ee=e.current)===null||ee===void 0?void 0:ee.fill)!=="rgb(0,0,0)"),showArrow:!!(!((Z=e.current)===null||Z===void 0||(ne=Z.item)===null||ne===void 0)&&ne.call(Z,1)&&((U=e.current)===null||U===void 0||(oe=U.item)===null||oe===void 0?void 0:oe.call(U,1).get("opacity"))===1)}),Pe(!0)}}]),rn=function(r){r.freeDrawingBrush=new L.pJ(r),r.freeDrawingBrush.color=P.color,r.freeDrawingBrush.width=P.width},ln=function(r){r&&rn(r)},dn=function(r){r.on("mouse:down",function(v){var m=v.button,C=v.e;m===3?(v.target?(e.current=v.target,$e(an)):$e(en),Fe({left:C.pageX,top:C.pageY}),q(!0)):(e.current=null,q(!1))}),r.on("path:created",function(v){var m=v.path;F.current.showBackground&&m.set("fill",F.current.backgroundColor),F.current.showArrow&&me(r,m,{stroke:F.current.color,strokeWidth:F.current.width})})},sn=function(r,v){if(D(v),!!n.current)switch(r){case"isDrawingMode":{var m;n.current.isDrawingMode=(m=v.isDrawingMode)!==null&&m!==void 0?m:!1;break}case"color":case"width":{n.current.freeDrawingBrush[r]=v[r];break}}},cn=function(){var r,v;if(!(!e.current||!n.current)){if(!d.showBackground){var m,C,I;(m=e.current)===null||m===void 0||(C=m.item)===null||C===void 0||(C=C.call(m,0))===null||C===void 0||C.set("fill",null),(I=e.current)===null||I===void 0||I.set("fill",null)}if(d.backgroundColor&&d.showBackground){var J,W,Q,j,V,z,$,ue;(J=e.current)===null||J===void 0||(W=J.item)===null||W===void 0||(W=W.call(J,0))===null||W===void 0||W.set("fill",d.backgroundColor),(Q=e.current)===null||Q===void 0||(j=Q.item)===null||j===void 0||(j=j.call(Q,1))===null||j===void 0||j.set("fill",d.backgroundColor),(V=e.current)===null||V===void 0||(z=V.item)===null||z===void 0||(z=z.call(V,2))===null||z===void 0||z.set("fill",d.backgroundColor),($=e.current)===null||$===void 0||(ue=$.set)===null||ue===void 0||ue.call($,"fill",d.backgroundColor)}if(d.color){var ee,Z,ne,U,oe,ve,Ge;(ee=e.current)===null||ee===void 0||(Z=ee.item)===null||Z===void 0||(Z=Z.call(ee,0))===null||Z===void 0||Z.set("stroke",d.color),(ne=e.current)===null||ne===void 0||(U=ne.item)===null||U===void 0||(U=U.call(ne,1))===null||U===void 0||U.set("stroke",d.color),(oe=e.current)===null||oe===void 0||(ve=oe.item)===null||ve===void 0||(ve=ve.call(oe,2))===null||ve===void 0||ve.set("stroke",d.color),(Ge=e.current)===null||Ge===void 0||Ge.set("stroke",d.color)}if(d.width){var xe,he,Be,fe,Re,pe,He;(xe=e.current)===null||xe===void 0||(he=xe.item)===null||he===void 0||(he=he.call(xe,0))===null||he===void 0||he.set("strokeWidth",d.width),(Be=e.current)===null||Be===void 0||(fe=Be.item)===null||fe===void 0||(fe=fe.call(Be,1))===null||fe===void 0||fe.set("strokeWidth",d.width),(Re=e.current)===null||Re===void 0||(pe=Re.item)===null||pe===void 0||(pe=pe.call(Re,2))===null||pe===void 0||pe.set("strokeWidth",d.width),(He=e.current)===null||He===void 0||He.set("strokeWidth",d.width)}if(d.showArrow){var Ae,Xe;if((Ae=e.current)!==null&&Ae!==void 0&&(Xe=Ae.item)!==null&&Xe!==void 0&&Xe.call(Ae,1)){var Te,Ne,ke,Ye;(Te=e.current)===null||Te===void 0||(Ne=Te.item)===null||Ne===void 0||Ne.call(Te,1).set("opacity",1),(ke=e.current)===null||ke===void 0||(Ye=ke.item)===null||Ye===void 0||Ye.call(ke,2).set("opacity",1)}else me(n.current,e.current,{stroke:F.current.color,strokeWidth:F.current.width})}else if((r=e.current)!==null&&r!==void 0&&(v=r.item)!==null&&v!==void 0&&v.call(r,1)){var Se,qe,Ie,Je;(Se=e.current)===null||Se===void 0||(qe=Se.item)===null||qe===void 0||qe.call(Se,1).set("opacity",0),(Ie=e.current)===null||Ie===void 0||(Je=Ie.item)===null||Je===void 0||Je.call(Ie,2).set("opacity",0)}Pe(!1),Y({}),n.current.renderAll()}};return(0,f.useEffect)(function(){var B=document.querySelector("#container");if(B&&u.current){var r=B.offsetWidth,v=B.offsetHeight,m={width:r,height:v,isDrawingMode:P.isDrawingMode,fireRightClick:!0,stopContextMenu:!0};n.current=new L.Xz(u.current,m),ln(n.current),dn(n.current)}return function(){var C;n==null||(C=n.current)===null||C===void 0||C.dispose()}},[]),(0,a.BX)(f.Fragment,{children:[(0,a.tZ)(Ce,{opt:M,onOptChange:sn}),(0,a.tZ)(be,{id:"container",children:(0,a.tZ)("canvas",{id:"canvas-tools-container",ref:u})}),(0,a.tZ)(b,{open:ze,position:Ke,menuData:tn}),(0,a.tZ)(R.Z,{title:"\u914D\u7F6E\u5F53\u524D\u5BF9\u8C61",open:Ue,width:600,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onOk:cn,onCancel:function(){return Pe(!1)},children:(0,a.tZ)(Ce,{type:"local",opt:d,onOptChange:function(r,v){return Y(v)}})})]})},on=nn},7792:function(H,h,o){o.r(h),o.d(h,{default:function(){return Ee}});var s=o(48305),p=o.n(s),y=o(42592),R=o(74590),L=o(75271),f=o(335),T=o.n(f),te=function(re){var G=1e-6,le=function ie(E,b){if(E.length===1)return Math.abs(E[0]-24)<G?b[0]:!1;for(var w=0;w<E.length;w++)for(var c=0;c<E.length;c++)if(w!==c){var X=[],de=[],g=T()(E.entries()),K;try{for(g.s();!(K=g.n()).done;){var N=p()(K.value,2),se=N[0],We=N[1];se!==w&&se!==c&&(X.push(We),de.push(b[se]))}}catch(Qe){g.e(Qe)}finally{g.f()}for(var Ce=[{val:E[w]+E[c],exp:"(".concat(b[w]," + ").concat(b[c],")")},{val:E[w]-E[c],exp:"(".concat(b[w]," - ").concat(b[c],")")},{val:E[c]-E[w],exp:"(".concat(b[c]," - ").concat(b[w],")")},{val:E[w]*E[c],exp:"(".concat(b[w]," * ").concat(b[c],")")},{val:E[w]/E[c],exp:"(".concat(b[w]," / ").concat(b[c],")")},{val:E[c]/E[w],exp:"(".concat(b[c]," / ").concat(b[w],")")}],ye=0,be=Ce;ye<be.length;ye++){var ce=be[ye];if(!(Math.abs(ce.val)<G&&(ce.val===E[w]||ce.val===E[c]))){X.push(ce.val),de.push(ce.exp);var me=ie(X,de);if(me)return me;X.pop(),de.pop()}}}return!1};return le(re,re.map(function(ie){return ie.toString()}))},De=te,ae=o(7903),a=function(){var re=(0,L.useState)(""),G=p()(re,2),le=G[0],ie=G[1],E=(0,L.useState)(""),b=p()(E,2),w=b[0],c=b[1],X=function(g){var K,N=(g==null||(K=g.target)===null||K===void 0?void 0:K.value)||"";ie(N);var se=N.split(",").map(Number).slice(0,4);c(String(De(se)))};return(0,ae.BX)(y.Z,{direction:"vertical",children:[(0,ae.tZ)(R.Z,{style:{width:"400px"},value:le,placeholder:"\u8BF7\u8F93\u5165\u9700\u8981\u8BA1\u7B97\u7684\u56DB\u4F4D\u6570\u5B57\uFF0C\u9017\u53F7\u5206\u5272\u3002\u4F8B:1,2,3,4",onChange:X}),(0,ae.tZ)(R.Z.TextArea,{rows:3,style:{width:"400px"},value:String(w)})]})},Ee=a},92155:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26068),_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__),jquery__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2692),jquery__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(75271),three__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(84279),three_addons_controls_TrackballControls_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(75078),three_addons_lines_Line2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(59574),three_addons_lines_LineGeometry_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(77962),three_addons_lines_LineMaterial_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(69508),three_addons_renderers_CSS3DRenderer_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(48432),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(7903),ThreeLayerGraph=function ThreeLayerGraph(){var camera,scene,sceneLine,renderer,webGLRenderer,isCreateLine,controls,points_list=[],DEG2RAD=.005555555555555556*Math.PI,materialOption={color:6737151,linewidth:5,dashed:!0},material=new three_addons_lines_LineMaterial_js__WEBPACK_IMPORTED_MODULE_3__.Y(_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0___default()(_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0___default()({},materialOption),{},{linewidth:3,dashed:!1})),materialDashed=new three_addons_lines_LineMaterial_js__WEBPACK_IMPORTED_MODULE_3__.Y(_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0___default()(_Users_zhupengcheng_zpcscc_demo_node_modules_pnpm_babel_runtime_7_23_6_node_modules_babel_runtime_helpers_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0___default()({},materialOption),{},{dashed:!0})),planeOption={width:200,height:100,interval:40},createElement=function(h,o){var s=document.createElement("div");return s.className="node",s.style.width="10px",s.style.height="10px",s.style.background=new three__WEBPACK_IMPORTED_MODULE_4__.Ilk(Math.random()*16777215).getStyle(),s.style.borderRadius="50%",s.style.margin="10px auto",s.dataset.z=String(h),s.dataset.id=o,s},createPlane=function(h){var o=h.position,s=h.background,p=h.id,y=document.createElement("div"),R=document.createElement("div");y.className="plane",y.style.width="".concat(planeOption.width,"px"),y.style.height="".concat(planeOption.height,"px"),y.style.opacity="0.7",y.style.background=s,y.style.border="10px #66ccff solid",y.dataset.id=String(p),R.style.width="100%",R.style.height="100%",R.style.display="grid",R.style.gridTemplateColumns="repeat(4,1fr)";for(var L=1;L<=12;L++)R.append(createElement(o.z,"".concat(p,"-").concat(L)));y.append(R);var f=new three_addons_renderers_CSS3DRenderer_js__WEBPACK_IMPORTED_MODULE_5__.cp(y);return f.position.x=o.x,f.position.y=o.y,f.position.z=o.z,f},createLine=function createLine(startPoint,endPoint){var isSamePlane=startPoint.z===endPoint.z,_ref2=planeOption||{},interval=_ref2.interval,absolute=Math.max(startPoint.z,endPoint.z)-Math.min(startPoint.z,endPoint.z),controlPoint1=startPoint,controlPoint2=endPoint;if(!isSamePlane&&absolute>interval){var centerPoint={x:(startPoint.x+endPoint.x)/2,y:(startPoint.y+endPoint.y)/2,z:(startPoint.z+endPoint.z)/2},oneThird={x:(2*startPoint.x+endPoint.x)/3,y:(2*startPoint.y+endPoint.y)/3,z:(2*startPoint.z+endPoint.z)/3},twoThird={x:(startPoint.x+2*endPoint.x)/3,y:(startPoint.y+2*endPoint.y)/3,z:(startPoint.z+2*endPoint.z)/3},getOffsetDistance=function(){var h=centerPoint.x,o=centerPoint.y,s=planeOption.width/2-Math.abs(h),p=planeOption.height/2-Math.abs(o);return s>p?{x:0,y:p*2.5}:{x:s*2.5,y:0}},operator={x:centerPoint.x>0?"+":"-",y:centerPoint.y>0?"+":"-"},offsetDistance=getOffsetDistance();controlPoint1={x:eval("".concat(oneThird.x," ").concat(operator.x," ").concat(offsetDistance.x)),y:eval("".concat(oneThird.y," ").concat(operator.y," ").concat(offsetDistance.y)),z:oneThird.z},controlPoint2={x:eval("".concat(twoThird.x," ").concat(operator.x," ").concat(offsetDistance.x)),y:eval("".concat(twoThird.y," ").concat(operator.y," ").concat(offsetDistance.y)),z:twoThird.z}}for(var curve=new three__WEBPACK_IMPORTED_MODULE_4__.yj7(new three__WEBPACK_IMPORTED_MODULE_4__.Pa4(startPoint.x,startPoint.y,startPoint.z),new three__WEBPACK_IMPORTED_MODULE_4__.Pa4(controlPoint1.x,controlPoint1.y,controlPoint1.z),new three__WEBPACK_IMPORTED_MODULE_4__.Pa4(controlPoint2.x,controlPoint2.y,controlPoint2.z),new three__WEBPACK_IMPORTED_MODULE_4__.Pa4(endPoint.x,endPoint.y,endPoint.z)),points=curve.getPoints(200),spline=new three__WEBPACK_IMPORTED_MODULE_4__.YT8(points),divisions=Math.round(points.length),point=new three__WEBPACK_IMPORTED_MODULE_4__.Pa4,positions=[],i=0,l=divisions;i<l;i++){var t=i/l;spline.getPoint(t,point),positions.push(point.x,point.y,point.z)}var geometry=new three_addons_lines_LineGeometry_js__WEBPACK_IMPORTED_MODULE_6__.L().setPositions(positions),line=new three_addons_lines_Line2_js__WEBPACK_IMPORTED_MODULE_7__.w(geometry,isSamePlane?material:materialDashed);line.computeLineDistances(),sceneLine.add(line);var startPos=points.at(-2),endPos=points.at(-1),direction=new three__WEBPACK_IMPORTED_MODULE_4__.Pa4(endPos.x-startPos.x,endPos.y-startPos.y,endPos.z-startPos.z).normalize(),length=1,hex=6737151,arrowHelper=new three__WEBPACK_IMPORTED_MODULE_4__.tGC(direction,startPos,length,hex,3,3);sceneLine.add(arrowHelper)},init=function H(){var h,o;camera=new three__WEBPACK_IMPORTED_MODULE_4__.cPb(45,window.innerWidth/window.innerHeight,1,1e3),camera.position.set(0,0,400),camera.lookAt(0,0,0);var s={rotation:{x:-(70*DEG2RAD),y:0*DEG2RAD,z:40*DEG2RAD},background:new three__WEBPACK_IMPORTED_MODULE_4__.Ilk(15790320)};scene=new three__WEBPACK_IMPORTED_MODULE_4__.xsS,scene.background=s.background,scene.rotation.x=s.rotation.x,scene.rotation.y=s.rotation.y,scene.rotation.z=s.rotation.z,sceneLine=new three__WEBPACK_IMPORTED_MODULE_4__.xsS,sceneLine.background="transparent",sceneLine.rotation.x=s.rotation.x,sceneLine.rotation.y=s.rotation.y,sceneLine.rotation.z=s.rotation.z,scene.add(createPlane({position:{x:0,y:0,z:40},background:"red",id:1})),scene.add(createPlane({position:{x:0,y:0,z:0},background:"green",id:2})),scene.add(createPlane({position:{x:0,y:0,z:-40},background:"blue",id:3})),renderer=new three_addons_renderers_CSS3DRenderer_js__WEBPACK_IMPORTED_MODULE_5__.lX,renderer.setSize(window.innerWidth,window.innerHeight),renderer.domElement.style.position="absolute",renderer.domElement.style.top="50%",renderer.domElement.style.left="50%",renderer.domElement.style.transform="translate(-50%, -50%)",(h=document.querySelector("#container"))===null||h===void 0||h.append(renderer.domElement),controls=new three_addons_controls_TrackballControls_js__WEBPACK_IMPORTED_MODULE_8__.$(camera,renderer.domElement),webGLRenderer=new three__WEBPACK_IMPORTED_MODULE_4__.CP7({antialias:!0,alpha:!0}),webGLRenderer.setClearColor(0,0),webGLRenderer.setPixelRatio(window.devicePixelRatio),webGLRenderer.setSize(window.innerWidth,window.innerHeight),webGLRenderer.useLegacyLights=!1,webGLRenderer.domElement.style.position="absolute",webGLRenderer.domElement.style.top="50%",webGLRenderer.domElement.style.left="50%",webGLRenderer.domElement.style.transform="translate(-50%, -50%)",webGLRenderer.domElement.style.zIndex=1,webGLRenderer.domElement.style.pointerEvents="none",(o=document.querySelector("#container"))===null||o===void 0||o.append(webGLRenderer.domElement)},animate=function H(){var h;if(!isCreateLine){var o=document.querySelectorAll(".node");if(o.length>0){o.forEach(function(L){var f=L||{},T=f.offsetLeft,te=f.offsetTop,De=f.dataset,ae=f.offsetWidth,a=f.offsetHeight,Ee=Number(De.z),_e=planeOption||{},re=_e.width,G=_e.height,le={x:-re/2+T+ae/2,y:G/2-te-a/2,z:Ee};points_list.push(le)});for(var s=function(){return Math.floor(Math.random()*points_list.length)},p=1;p<=20;p++){var y=points_list[s()],R=points_list[s()];createLine(y,R)}isCreateLine=!0}}(h=controls)===null||h===void 0||h.update(),renderer.render(scene,camera),webGLRenderer.render(sceneLine,camera),material.resolution.set(window.innerWidth,window.innerHeight),materialDashed.resolution.set(window.innerWidth,window.innerHeight),requestAnimationFrame(H)},addEventListener=function H(){var h,o;jquery__WEBPACK_IMPORTED_MODULE_1___default()(".plane").off(),jquery__WEBPACK_IMPORTED_MODULE_1___default()(".node").off(),jquery__WEBPACK_IMPORTED_MODULE_1___default()(document.body).off("pointerup"),jquery__WEBPACK_IMPORTED_MODULE_1___default()(".plane").on("pointerdown",function(){var s=this.dataset,p=s||{},y=p.id;h=y}),jquery__WEBPACK_IMPORTED_MODULE_1___default()(".node").on("pointerdown",function(){var s=this.dataset,p=s||{},y=p.id;o=y}),jquery__WEBPACK_IMPORTED_MODULE_1___default()(document.body).on("pointerup",function(){o?console.log("\u89E6\u53D1\u4E86\u8282\u70B9-".concat(o)):h&&console.log("\u89E6\u53D1\u4E86\u5E73\u9762-".concat(h)),h=void 0,o=void 0}),window.addEventListener("resize",function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),webGLRenderer.setSize(window.innerWidth,window.innerHeight)})};return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function(){init(),animate(),addEventListener()}),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.tZ)("div",{id:"container",style:{position:"relative",overflow:"hidden",height:"500px",border:"1px solid #ccc"}})};__webpack_exports__.default=ThreeLayerGraph}}]);
